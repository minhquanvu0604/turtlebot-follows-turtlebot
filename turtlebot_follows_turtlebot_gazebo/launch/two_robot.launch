<launch>

    <arg name="tf_freq" default="50" />

    <include file="$(find gazebo_ros)/launch/empty_world.launch" >
        <arg name="paused" value="false"/>
        <arg name="use_sim_time" value="true"/>
        <arg name="gui" value="true"/>
        <arg name="debug" value="false"/>
    </include>

    <param name="robot_description" command="$(find xacro)/xacro --inorder $(find turtlebot3_description)/urdf/turtlebot3_waffle_pi.urdf.xacro
        laser_visual:=true 
        camera_visual:=true
        imu_visual:=true
        " />

    <group ns="follower" >
    
        <param name="tf_prefix" value="follower" />
        <node pkg="gazebo_ros" type="spawn_model" name="spawn_urdf_follower"  args="-urdf -model follower -x 0 -y 0 -z 0 -param /robot_description" />
        <node pkg="robot_state_publisher" type="robot_state_publisher" name="state_publisher_follower">
            <param name="publish_frequency" type="double" value="$(arg tf_freq)" />
            <param name="tf_prefix" value="follower"/>
        </node>
    </group>

    <group ns="leader" >
        <param name="tf_prefix" value="leader" />
        <node pkg="gazebo_ros" type="spawn_model" name="spawn_urdf_leader"  args="-urdf -model leader -x 5 -y 0 -z 0 -param /robot_description" />
        <node pkg="robot_state_publisher" type="robot_state_publisher" name="state_publisher_leader">
            <param name="publish_frequency" type="double" value="$(arg tf_freq)" />
            <param name="tf_prefix" value="leader" />
        </node>
    </group>
</launch>
